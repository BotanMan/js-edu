```js
var TV = (function() {
	var that = {
			  status: 'Off'				
			},
			$channels = [],
			tvHistory = [],
			currentChannel,
			months = [
				"января",
				"февраля",
				"марта",
				"апреля",
				"мая",
				"июня",
				"июля",
				"августа",
				"сентября",
				"октября",
				"ноября",
				"декабря"
			];
	
	function addToHistory(action) {
		var date = new Date(),
				day = date.getDay(),
				month = months[date.getMonth()],
				year = date.getFullYear(),
				hour = date.getHours(),
				minut = (date.getMinutes() < 10) ? '0' + date.getMinutes() : date.getMinutes(),
				dt = day + ' ' + month + ' ' + year + ', ' + hour + ':' + minut;
				
		tvHistory.push({time: dt, act: action});
	}	

	function clearHistory() {
		tvHistory = [];
	}

	that.getHistory = function() {
		return tvHistory;
	}

	function nCopy(dest, src, arr) {
		arr = arr || _this.keys(src);
		dest = dest || {};
		src = src || {};
		for (var key in src) {
			if (~arr.indexOf(key)) {
				if (typeof src[key] == 'object' && src[key] !== null) {
					dest[key] = nCopy({}, src[key], arr);
				} else {
					dest[key] = src[key];
				}
			}
		}
		return dest;
	}

	that.turnOff = function() {
		that.status = 'Off';
		clearHistory();
	}

	that.turnOn = function() {
		if (!currentChannel && channels.length) {
			currentChannel = channels[0];
		}
		that.status = 'On';
		addToHistory('TV включен');
	}
	
	that.init = function(channels) {
		for (var key in channels) {
			channels[key] = nCopy({
				name: "",
				frequency: 1000,
				popularity: 1
			}, channels[key], [
				"name", "frequency", "popularity"
			]);
		}
		return channels;
	}

	that.getPopulars = function() {
		return channels.sort(function(a, b) {
			return a.popularity - b.popularity;
		});
	}

	that.getCurrentChannel = function() {
		return (that.status == 'On') ? currentChannel : 'TV выключен';
	}

	that.switchToChannel = function(nChanel) {
		var search = channels.filter(function(sChannel) {
			return sChannel.frequency === nChanel || sChannel.name === nChanel;
		});
		if (search.length) {
			currentChannel = searchChannel[0];
			addToHistory('Переключение на канал "' + currentChannel.channelName + '"');
		}
		return (search.length) ? currentChannel : false;
	}

	that.getStatus = function() {
		return (that.status == 'On') ? that.getCurrentChannel() : 'TV выключен';
	}

	return that;
})();
```
